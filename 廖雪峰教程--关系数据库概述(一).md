---

title: 廖雪峰SQL教程--关系数据库概述(一)
date: 2019-2-11 21:54:50
tags:  SQL
categories: "SQL"
mathjax: true

---

数据库作为一种专门管理数据的软件。应用程序不需要自己管理数据，而是通过数据库软件提供的接口来读写数据。至于数据本身如何存储到文件，那是数据库软件的事情，应用程序自己并不关心。


	┌──────────────┐
	│ application  │
	└──────────────┘
	       ▲│
	       ││
	   read││write
	       ││
	       │▼
	┌──────────────┐
	│   database   │
	└──────────────┘

这样一来，编写应用程序的时候，数据读写的功能就大大被简化了。<!--more-->


### 数据模型

数据库安全数据结构来组织、存储和管理数据，实际上，数据库一共有三种模型：

- 层次模型
- 网状模型
- 关系模型

层次模型就是以“上下级”的层次关系组织数据的一种方式，层次模型的数据数据结构看起来像一棵树：

	            ┌─────┐
	            │     │
	            └─────┘
	               │
	       ┌───────┴───────┐
	       │               │
	    ┌─────┐         ┌─────┐
	    │     │         │     │
	    └─────┘         └─────┘
	       │               │
	   ┌───┴───┐       ┌───┴───┐
	   │       │       │       │
	┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐
	│     │ │     │ │     │ │     │
	└─────┘ └─────┘ └─────┘ └─────┘

网状模型把每个节点和其他很多节点都连接起来，它的数据结构看起来就像很多城市之间的路网：

	     ┌─────┐      ┌─────┐
	   ┌─│     │──────│     │──┐
	   │ └─────┘      └─────┘  │
	   │    │            │     │
	   │    └──────┬─────┘     │
	   │           │           │
	┌─────┐     ┌─────┐     ┌─────┐
	│     │─────│     │─────│     │
	└─────┘     └─────┘     └─────┘
	   │           │           │
	   │     ┌─────┴─────┐     │
	   │     │           │     │
	   │  ┌─────┐     ┌─────┐  │
	   └──│     │─────│     │──┘
	      └─────┘     └─────┘

关系模型把数据看作是一个二维表格，任何数据都可以通过行号+列号来唯一确定，它的数据模型看起来像一个Excel表:

	┌─────┬─────┬─────┬─────┬─────┐
	│     │     │     │     │     │
	├─────┼─────┼─────┼─────┼─────┤
	│     │     │     │     │     │
	├─────┼─────┼─────┼─────┼─────┤
	│     │     │     │     │     │
	├─────┼─────┼─────┼─────┼─────┤
	│     │     │     │     │     │
	└─────┴─────┴─────┴─────┴─────┘

关系数据库得到广泛应用的原因：

因为相比层次模型和网状模型，关系模型理解和使用起来最简单。

基于数学理论的关系模型虽然讲起来挺复杂，但是，基于日常生活的关系模型却十分容易理解。我们以学校班级为例，一个班级的学生就可以用一个表格存起来，并且定义如下：

	ID	姓名	班级ID	性别	年龄
	1	小明	 201	    M	9
	2	小红	 202	    F	8
	3	小军	 202	    M	8
	4	小白	 201     	F	9

其中，班级ID对应着另一个班级表：

	ID	   名称	  班主任
	201	二年级一班	王老师
	202	二年级二班	李老师


## 数据类型

对于一个关系表，除了定义每一列的名称外，还需要定义每一列的数据类型。关系数据库支持的标准数据类型包括数值、字符串、时间等：


|名称 | 类型	| 说明 |
|---|	
| INT  | 整型 | 4字节整数类型，范围约+/-21亿 |
| BIGINT | 长整型 | 8字节整数类型，范围约+/-922亿亿 |
| REAL | 浮点型 | 4字节浮点数，范围约+/-1038 |
| DOUBLE | 浮点型 | 8字节浮点数，范围约+/-10308 |
| DECIMAL(M,N)	| 高精度小数	| 由用户指定精度的小数，例如，DECIMAL(20,10)表示一共20位，其中小数10位，通常用于财务计算 |
| CHAR(N)	| 定长字符串 | 存储指定长度的字符串，例如，CHAR(100)总是存储100个字符的字符串 |
| VARCHAR(N)	| 变长字符串 | 存储可变长度的字符串，例如，VARCHAR(100)可以存储0~100个字符的字符串 |
| BOOLEAN	| 布尔类型	| 存储True或者False |
| DATE	| 日期类型	| 存储日期，例如，2018-06-22 |
| TIME	| 时间类型	| 存储时间，例如，12:20:59 |
| DATETIME	| 日期和时间类型	| 存储日期+时间，例如，2018-06-22 12:20:59 |

## 主流数据库

商用数据库：

- Oracle
- SQL server
- DB2

开源数据库：

- MySQL
- PostgreSQL


桌面数据库： 微软Access为代表

嵌入式数据库： Sqlite为代表

## SQL

SQL是结构化查询语言Structured Query Language的缩写，用来访问和操作数据库系统。SQL语句既可以查询数据库中的数据，也可以添加、更新、删除数据库中的数据，还可以对数据库进行管理和维护操作。不同的数据库都支持SQL，这样，我们通过学习SQL这一种语言，就可以操作各种不同的数据库。

虽然SQL已经被ANSI组织定义为标准，不幸地是，各个不同的数据库对标准的SQL支持不太一致。并且，大部分数据库都在标准的SQL上做了扩展。也就是说，如果只使用标准SQL，理论上所有数据库都可以支持，但如果使用某个特定数据库的扩展SQL，换一个数据库就不能执行了。例如，Oracle把自己扩展的SQL称为PL/SQL，Microsoft把自己扩展的SQL称为T-SQL。

现实情况是，如果我们只使用标准SQL的核心功能，那么所有数据库通常都可以执行。不常用的SQL功能，不同的数据库支持的程度都不一样。而各个数据库支持的各自扩展的功能，通常我们把它们称之为“方言”。

总的来说，SQL语言定义了这么几种操作数据库的能力：

__DDL：Data Definition Language__

DDL允许用户定义数据，也就是创建表、删除表、修改表结构这些操作。通常，DDL由数据库管理员执行。

__DML：Data Manipulation Language__

DML为用户提供添加、删除、更新数据的能力，这些是应用程序对数据库的日常操作。

__DQL：Data Query Language__

DQL允许用户查询数据，这也是通常最频繁的数据库日常操作。
